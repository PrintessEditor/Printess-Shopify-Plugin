{% comment %}
  Renders the printess slim ui integration
  Version 1.0
  
  Accepts:
    - frontendAppToken: { String } The Shopify app token for frontend api access
    - shopToken: { String } The Printess Shop Token
    - cssProductContainerSelector: { String } 
    - cssProductInfoSelector: { String } 
    - cssProductMediaSelector: { String } 
    - cssImageSelector: { String } 
    - cssPriceTextSelector: { String } 
    - cssProductFormSelector: { String } 
    - cssProductIdSelector: { String } 
    - cssProgressIndicatorSelector: { String } 
    - cssAddToBasketButtonSelector: { String } 
    - cssVariantSwitchSelector: { String } 
    - addToBasketCaption: { String }
    - saveBasketItemCaption: { String }
    - cancelCaption: { String }
    - formInsertPosition: { Boolean }
    - ignoreDataOptionIndex: { Number }
    - shopThemeName : { String }

  Usage:
  {% render 'printess-slim-ui',
    frontendAppToken: "",
    shopToken: ""
  %}
{% endcomment %}

<script>
  window.addEventListener('DOMContentLoaded', () => {
    const printessSettings = {
        frontendAppToken:  {{ frontendAppToken | json }} || "",
        shopToken: {{ shopToken | json}} || "",
        uiSelectors: {
          cssProductContainerSelector: {{ cssProductContainerSelector | json}} || null,
          cssProductInfoSelector:  {{ cssProductInfoSelector | json}} || null,
          cssProductMediaSelector:  {{ cssProductMediaSelector | json}} || null,
          cssImageSelector:  {{ cssImageSelector | json}} || null,
          cssPriceTextSelector:  {{ cssPriceTextSelector | json}} || null,
          cssProductFormSelector:  {{ cssProductFormSelector | json}} || null,
          cssProductIdSelector:  {{ cssProductIdSelector | json}} || null,
          cssProgressIndicatorSelector:  {{ cssProgressIndicatorSelector | json}} || null,
          cssAddToBasketButtonSelector:  {{ cssAddToBasketButtonSelector | json}} || null,
          cssVariantSwitchSelector:  {{ cssVariantSwitchSelector | json}} || null
        },
        shopThemeName: {{ shopThemeName | json}} || null,
        captions: {
          addToBasket: {{ addToBasket | json}} || "Add to basket",
          saveBasketItem: {{ saveBasketItem | json}} || "Add to basket",
          cancel: {{ cancel | json}} || "Add to basket",
        },
        formInsertPosition: {{ formInsertPosition | json}} || 4,
        ignoreDataOptionIndex: {{ ignoreDataOptionIndex | json}} || false,
        priceFormat: "{{ shop.money_format }}"
    };

    PrintessShopifySlimUi.initializeSections(printessSettings).then((printessProductIntegrations) => {
      window["printessProductIntegrations"] = printessProductIntegrations;
    });
  });
</script>
{% comment %}
    Renders a custom loader to the printess editor
    Version 2.6

    Accepts:
    - imgUrl: {String} The url to the logo that should be displayed
    Usage:
    {% render 'printess-add-to-basket',
      imgUrl: ""
    %}
{% endcomment %}

<script>
  let settings = window["printessGlobalConfig"] || null;

  if(!settings) {
    settings = window["printessGlobalConfig"] = {};

    if(!settings.customLoader) {
      settings.customLoader = {};
    }

    const originalOpen = typeof settings.customLoader.onShowLoader === "function" ? settings.customLoader.onShowLoader : null;
    const originalHide = typeof settings.customLoader.onHideLoader === "function" ? settings.customLoader.onHideLoader : null;

    settings.customLoader.onShowLoader = () => {
      const loader = document.getElementById("printess_custom_loader");

      if(loader && document.body) {
        if(loader.parent !== document.body) {
          document.body.appendChild(loader);
        }

        loader.style.display = "block";
      }

      if(originalOpen) {
        originalOpen();
      }
    };

    settings.customLoader.onHideLoader = () => {
      const loader = document.getElementById("printess_custom_loader");

      if(loader) {
        loader.style.display="none";
      }

      if(originalHide) {
        originalHide();
      }
    };
  }
</script>

<style>
  #printess_custom_loader {
    width: 100vw;
    height: 100vh;
    margin: 0;
    position: fixed;
    top: 0;
    left: 0;
    overflow: hidden;
    border:0;
    padding:0;
  }

  #printess_custom_loader .container {
    width: 100%;
    height: 100%;
    margin: 0;
    position: relative;
    border: 20px solid #cbd81d;
  }

  #printess_custom_loader .container img {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 98%;
  }
</style>

<div id="printess_custom_loader" class="printess-owned" style="display:none;">
  <div class="container">
  {% if imgUrl != blank %}
    <img class="" src="{{ imgUrl }}">
  {% endif %}
  </div>
</div>